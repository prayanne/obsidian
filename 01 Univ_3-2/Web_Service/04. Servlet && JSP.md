```table-of-contents
```
# 개요

## 서블릿의 동작 과정

1. URL 입력 || Form  전송
	1. http://domain/프로젝트명/서블릿매핑URL
2. 서블릿이 최초 요청일 경우
	1. 아래의 행동을 하여, 메모리에 등록
	2. 행동
		1. 서블릿 클래스 로드
		2. 인스턴스 생성
			1. new Servlet()
		3. init() 메서드 호출
3. Request - 요청이 들어올 때 마다 새로운  Thread생성
	1. 서블릿 - service()
		1. 메서드 호출
		2. 메서드 내부
			1. HTTP 메서드에 맞게 분기
				1. GET
				2. POST
	2. DB에 접근하면 트랜젝션 처리를 위해 BLOCK
		1. 속도 저하의 큰 문제점 지적
		2. 개선의 여지
4. Response - 서블릿은 응답을 생성
	1. 사용 객체
		1. HttpServletResponse 객체
	2. 응답 생성
		1. HTML
		2. JSON
		3. XML
	3. 응답 형태
		1. HTTP Response 형태
		2. WAS - 웹 서버 - 클라이언트로 전달

### 서블릿 요청 - 응답 흐름
1. 클라이언트 요청을 발신
2. 웹서버가 요청을  WAS에 전달
3. WAS(Tomcat)
	1. req를 처리하기 위해, req Class를 호출
	2. res를 작성하기 위해, res Class를 호출
	3. 각 class는 처리한 data를 인수로 전달
	4. Servlet 코드 처리
	5. res 작성
	6. 웹서버로 응답을 전달
4. 웹서버가 응답을 클라이언트에 전달
5. 클라이언트는 응답을 수신

<hr>

# Servlet의 장점

- 자바를 기반
	- 자바 API모두 사용 가능
- 운영 체제 && 하드웨어의 영향을 받지 않음
	- 한번 개발하면, 다양한 서버 환경에서 실행할 수 있는 어플리케이션
- 웹 어플리케이션에서 효율적인 자료 공유 방법이 존재
	- Tomcat
		- 웹 어플리케이션
		- 
	- 각 어플리케이션
		- Servlet Class
	- 각 쓰레드

# 서블릿의 단점

- HTML 응답을 위해서는 출력문으로 문자열 결합을 사용해야 함
- 서블릿에서 HTML을 포함할 경우 화면 수정이 어려움
- HTML form의 데이터 처리가 불편함
	- request.getParameter() 를 계속 호출해야 함
		- 여러 개의 파라미터
		- 복잡한 폼 구조
- 다양한 경로의 URL 접근
	- 하나의 클래스에서 처리하기 어려움
	- 단일 요청 처리
	- 단일 응답 처리

# 서블릿의 특징

## 실제 자바 웹 개발 - 서블릿 && 다른 기술 조합

1. 서블릿은 저수준 기술
	1. HTTP 요청/응답을 직접 처리
2. 응답 화면 구성
	1. 템플릿 엔진 사용
		1. JSP
3. REST API 구현
	1. JAX-RS 표준 사용
4. 프런트 컨트롤러 모델 사용
	1. 복잡한 서비스 구현 가능
	- 모든 요청을 단일 진입점으로 받아서 처리
		- Controller
	- 공통 처리 로직을 한 곳에서 처리
		- 인증
		- ~
	- 하나의 서블릿이 공통적인 처리를 수행

<hr>

# 서블릿 클래스의 구조

- 서블릿 구현
	- 자바
- 서블릿 컨테이너에 서블릿을 알려야 함
- URL 접근 실행 등록 과정 필

1. 서블릿 2.0
	1. 배포 서술자 web.xml에 등록이 필요
	2. 웹 어플리케이션 구조를 컨테이너에 알려주기 위함
2. 3.0
	1. 자바 어노테이션으로 가능
	2. 라이브러리가 web.xml을 대신 처리

## 추상 클래스 - GenericServlet / HttpServlet

- 서블릿은 추상 클래스를 상속해 구현
	- javax.serlvet.Servlet 인터페이스를 현한 추상 클래스
	- GenericServlet
	- HttpServlet
		- Http 통신에 최적화된 클래스로 해당 클래스를 사용함
- HttpServlet을 상속
	- doGet()
	- doPost()
	- 메서드 오버라이딩

## HttpServletRequest
### HttpServletRequest 객체

- HTTP 프로토콜의 request 정보
	- 서블릿에 전달하기 위한 목적으로 사용
	- 클래스
		- HTTP body의  Stream을 읽어드리는 메서드
		- 정보를 읽어드리는 메서드
			- 헤더정보
			- 파라미터
			- 쿠키
			- URL
			- URI
- 서블릿 컨테이너에서 생성
	- when, 클라이언트의 요청
		- 전달
			- doGet()
			- doPost()
		- HSR 객체는 인자로 함께 전달
- 서블릿 - 클라이언트 연결 && 처리
	- HttpServletRequest를 통해야 함

### HttpServletRequest의 주요 메서드

- getParameter(name)
	- name 속성 전달 - Parmas val
- getScheme()
	- 프로토콜
		- http
		- https
		- FTP
- getServerPort()
	- 서버 포트
- getContextPath()
	- 콘텍스트 경로
	- tomcat의 프로젝트 명
- getMethod()
	- Http 메서드
		- get
		- post
- getLocalAddr()
	- 서버의 로컬 IP 주소
- getRemoteAddr()
	- 클라이언트 IP 주소
	- if - Proxy 서버가 존재하여 값이 훼손 될 때
		- X-forwarded-For
			- 정확한 발신자를 명시


<hr>

## HttpServletResponse

### HttpServletRequest 객체
- 서버 - 클라이언트
	- 전달을 위한 목적 - 기능
	- HttpServletResponse 객체를 생성하여 서블릿에 전달

### HttpServletResponse의 주요 메서드
- sendRedirect(String location)
	- 클라이언트로 응답
		- 리다이렉트
		- 특정 URL
	- 클라이언트 행동
		- 특정 URL
			- 재 request
- getWriter()
	- 클라이언트로 데이터를 보내기 위한 출력 스트림을 리턴
	- response의 body를 작성
- getContentType()
	- 클라이언트에 전달되는 콘텐츠 타입을 지정
		- http
		- plain
			- 브라우저는 해당 타입을 보고 렌더링을 판단
- addheader(String name, String value)
	- header
		- add name
		- add value



<hr>

# 어노테이션 || Server.xml
- 첨부
	- 각 JSP를 구현할 때 URL로 접근 불가
		- 서블릿은 각 함수별 URL 설정이 불가
	- 각 JSP를 구현할 때 URL로 접근 가능
		- 스프링 부트
			- REST API 부터 가능

## 어노테이션
- 라이브러리가 많아진다면
	- 각 라이브러리에서 제작한 어노테이션을 활용해야 함

## Server.xml
- 기존의 사용 방법