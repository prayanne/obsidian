
# ROOT DNS
- level 1
- 1차 적인 공식 주소 정보 제공 창구
- 중요한 인터넷 기능
	- DNS 미제공
		- 인터넷 마비
	- DNSSEC
		- 보안 기능
			- 인증
			- 메시지 무결성
- ICANN
	- Internet Corporation for Assigned Names and Numbers
	- ROOT DNS Domain 관리
# TLD
- level 2
- Top-level Domain
1. 주요 Domain
	1. com
	2. org
	3. net
	4. edu
	5. aero
	6. jobs
	7. meseums
2. 국가 상위 레벨 Domain
	1. uk
	2. fr
	3. ca
	4. jp
# 책임 DNS
- Level 3
- 기관 내에서 독자 운영
- 정보 관리
	- 서버 이름
	- IP 조소 간 변환 정보
- 정보 제공
	- 외부 의 관련 정보 요청
- 기관 내 담장자, 서비스 제공자에 의해 관리

# Local DNS name server
- 3계층 구조에 포함 x
- 보통 통신사가 운영
	- IST
	- 부가
		- 가정 ISP
		- 회사
		- 학교
	- 속도 처리 향상을 위해 개별적으로 운영
- Default name server
	- 캐시 서버라고도 함
	- 동적 정보 관리
- 내부 캐시에 일시적으로 보관 및 관리
	- 도메인 이름
	- IP 주소간 매핑 정보
- 호스트의 DNS 질의
	1. 로컬 DNS 전송
	2. 내부 캐시에 보관 및 관리
		1. 도메인 이름
		2. IP 주소간 매칭 정보
		3. 일시적
	3. Proxy 역할
		1. DNS 질의를 DNS 계층 구조로 전달

<hr>

# DNS 동작 절차
## 1. 반복적 질의
- 연결된 서버는 다음에 연결할 서버 주소를 클라이언트에 회신
- 질의한 이름은 해당 서버는 잘 모름
	- 다음 서버에 문의하면 알 수 있음
## 2. 재귀적 질의
- 연결된 서버가 이름 변환의 부하를 독자적 감당
- 상위 계층 서버에 상당한 수준의 부하
- 심각한 부하가 발생
	- 권장하지 않음


<hr>
# 레코드 캐싱 | 업데이트
- 네임 서버는 정보 입수 시, 캐시에 매핑 정보 저장
	- 캐시 업데이트
	- TTL 이후 캐시 정보 사라짐
	- 로컬 캐시 서버에 TLD 서버 정보 저장
		- 루트 서버 방문 기회 감소
		- 루트 서버 트래픽 감소
- 캐시 정보가 실제 정보와 일치되지 않을 수 있음
	- TTL
		- 호스트 IP 주소가 변경되면 TTL에 따라 전파
		- Time To Live
			- TTL 시간이 경과되어야 갱신된 내용이 전체 DNS로 전파됨
- IETF 갱신 | 통보 메커니즘 표준
	- RFC 2136

<hr>

# DNS 레코드 구조

## DNS
- 분산 데이터 베이스 내 자원 레코드
	- resource
	- record
	- RR
### RR
- name
- value
- type
- ttl
### Type A
- name
	- 호스트 명칭
- value
	- IP 주소
### CNAME
- name
	- 정싱 명칭의 별칭
		- www.ibm.com
- value
	- 정식 명칭
	- serverease.backup2.ibm.com
### NS
- name
	- 도메인
		- foo.com
- value
	- 해당 도메인 내 책임 DNS서버의 호스트 이름
- Name Server
### MX
- value
	- 메일 서버 정식 명칭
- Mail X

<hr>

# DNS Protocol | Message
## 구조
### Header
- Identification
	- 질의응답 명시 번호
	- 고유 16비트 식별자
	- 질의, 응답 - 동일 식별자 사용
		- 요청 num
			- 101
		- 응답 num
			- 101
- flags
	- 질의 응답 구분
	- 재귀적, 반복적 질의 구분
	- 책임 DNS서버 응답 표시
		- level 3
		- 책임 여부
			- 책임이 있으면 책임 DNS에서 제공
			- 책임이 없으면 ROOT, TLD에서 제공
### Body
- Questions
	- 질의 시의 이름과 타입
- Answers
	- 질의에 대한 응답  RR 형식
- Authority
	- 책임 DNS가 생성한 RR 형식
- Additional info
	- 추가 정보


<hr>


# DNS 보안

1. DDoS 공격
2. 루트 서버 공격
	1. 성공 사례 x
	2. 트래픽 필터링
	3. 로컬 DNS 서버
		1. TLD 서버 주소 캐싱
		2. 우회
			1. 루트 서버 우회로 공격
3. TLD 서버 공격
	1. 공격 위험성 높음
4. DNSSEC - RFC 4033
	1. 우회 공격
		1. main-in-middle
			1. 중간에서 질의 탈취
		2. DNS오염
			1. DNS서버에 가짜 RR를 보내 캐싱 유도
	2. DNS - DDoS 공격
		1. 연결 대상 IP 주소 위장
			1. 쿼리 발송


<hr>